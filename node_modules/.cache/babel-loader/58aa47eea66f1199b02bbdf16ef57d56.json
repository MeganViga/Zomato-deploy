{"ast":null,"code":"import _classCallCheck from\"D:\\\\Study\\\\Full stack development edureka\\\\practice\\\\ZomatoPrototype\\\\zomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Study\\\\Full stack development edureka\\\\practice\\\\ZomatoPrototype\\\\zomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Study\\\\Full stack development edureka\\\\practice\\\\ZomatoPrototype\\\\zomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Study\\\\Full stack development edureka\\\\practice\\\\ZomatoPrototype\\\\zomato\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';var url=\"http://localhost:8900/location\";var resurl=\"http://localhost:8900/restauranthome?city=\";var Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.handleLocation=function(data){var dup=[];if(data){for(var i=0;i<data.length;i++){var flag=0;for(var j=0;j<dup.length;j++){if(dup[j]['city']===data[i]['city']){flag=1;break;}}if(flag===0){dup.push(data[i]);}}return dup.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{className:\"search\",value:item.city},item.city_name);});}};_this.handleCity=function(event){_this.setState({city:event.target.value});var city=parseFloat(event.target.value);sessionStorage.setItem('city',event.target.value);fetch(\"\".concat(resurl).concat(city),{method:'GET'}).then(function(res){return res.json();}).then(function(data){_this.setState({restaurant:data});});};_this.handlerestaurantsearch=function(event){_this.props.history.push(\"/restdetails/\".concat(parseInt(event.target.value)));};_this.handleRestaurant=function(data){if(data){return data.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{className:\"search\",value:item._id},\"\\uF05E\",item.name);});}};_this.state={location:'',city:'',restaurant:''};return _this;}_createClass(Search,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"p\",{id:\"find-rest\"},\"Find the Best restaurants, cafes and bars\")),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid pt-5 pt-md-5 pt-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{id:\"inputboxes\",className:\"row d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"select\",{id:\"inputbox\",className:\"inputbox col-10 col-sm-3\",placeholder:\"Please type a location\",onChange:this.handleCity},/*#__PURE__*/React.createElement(\"option\",{class:\"placeholder\",value:\"\",hidden:true},\"Please select a location\"),this.handleLocation(this.state.location)),/*#__PURE__*/React.createElement(\"select\",{id:\"inputbox\",className:\" ml-md-2 inputbox col-10 col-sm-3\",onChange:this.handlerestaurantsearch,placeholder:\"Search for restaurants\"},/*#__PURE__*/React.createElement(\"option\",{class:\"placeholder\",value:\"\",hidden:true},\"Search for restaurants\"),this.handleRestaurant(this.state.restaurant)))));}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(url,{method:'GET'}).then(function(res){return res.json();}).then(function(data){return _this2.setState({location:data});});}}]);return Search;}(Component);export default Search;","map":{"version":3,"sources":["D:/Study/Full stack development edureka/practice/ZomatoPrototype/zomato/src/component/home/Search.js"],"names":["React","Component","url","resurl","Search","props","handleLocation","data","dup","i","length","flag","j","push","map","item","city","city_name","handleCity","event","setState","target","value","parseFloat","sessionStorage","setItem","fetch","method","then","res","json","restaurant","handlerestaurantsearch","history","parseInt","handleRestaurant","_id","name","state","location"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\n\r\n\r\nvar url = \"http://localhost:8900/location\";\r\nvar resurl =\"http://localhost:8900/restauranthome?city=\";\r\n\r\nclass Search extends Component{\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state={\r\n      location:'',\r\n      city:'',\r\n      restaurant:''\r\n    }\r\n\r\n}\r\nhandleLocation = (data) => {\r\n  var dup =[]\r\n if(data){\r\n\r\n  for(var i =0;i<data.length;i++){\r\n    var flag = 0\r\n    for(var j=0;j<dup.length;j++){\r\n      if(dup[j]['city'] === data[i]['city'])\r\n      {\r\n        flag = 1\r\n        break;\r\n      }\r\n    }\r\n    if(flag===0)\r\n    { \r\n      dup.push(data[i])\r\n\r\n    }\r\n  }\r\n  \r\n  return(dup.map((item) => {\r\n    return(\r\n    <option className=\"search\" value={item.city}>{item.city_name}</option>\r\n    )\r\n  }))\r\n\r\n\r\n }\r\n  }\r\nhandleCity =(event) => {\r\n    this.setState({city:event.target.value})\r\n    var city = parseFloat(event.target.value);\r\n    sessionStorage.setItem('city',event.target.value)\r\n    fetch(`${resurl}${city}`,{method:'GET'}).then((res) => res.json()).then((data) => { this.setState({restaurant:data})})\r\n\r\n}\r\n\r\nhandlerestaurantsearch = (event) => {\r\n this.props.history.push(`/restdetails/${parseInt(event.target.value)}`)\r\n\r\n}\r\nhandleRestaurant = (data) => {\r\n  if(data){\r\n    return(\r\n      data.map((item) => {\r\n        return(\r\n         <option className=\"search\" value={item._id}  >\r\n        &#xf05e;\r\n           \r\n         {item.name}\r\n       \r\n       </option>\r\n        \r\n          \r\n\r\n        )\r\n      })\r\n    )\r\n  }\r\n}\r\nrender(){\r\n  return(\r\n    <div className=\"container\">\r\n      <div className=\"container-fluid\"><p id=\"find-rest\">Find the Best restaurants, cafes and bars</p></div>\r\n    \r\n      <div className=\"container-fluid pt-5 pt-md-5 pt-lg-0\">\r\n      <div id=\"inputboxes\" className=\"row d-flex justify-content-center\">\r\n        <select id=\"inputbox\" className=\"inputbox col-10 col-sm-3\"  placeholder=\"Please type a location\" onChange={this.handleCity}>\r\n       <option  class=\"placeholder\" value=\"\"\r\n            hidden\r\n             >Please select a location</option>\r\n          {this.handleLocation(this.state.location)}\r\n         \r\n        </select>\r\n        <select  id =\"inputbox\" className=\" ml-md-2 inputbox col-10 col-sm-3\"  onChange={this.handlerestaurantsearch} placeholder=\"Search for restaurants\">\r\n        <option class=\"placeholder\" value=\"\"\r\n            hidden\r\n           >\r\n            Search for restaurants</option>\r\n        {this.handleRestaurant(this.state.restaurant)}\r\n        </select>\r\n      </div>\r\n\r\n      </div>\r\n\r\n  </div>\r\n  )\r\n\r\n}\r\n  componentDidMount(){\r\n    fetch(url,{method:'GET'}).then((res) => res.json()).then((data) => {return(\r\n      this.setState({location:data})\r\n    )})\r\n  }\r\n}\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}